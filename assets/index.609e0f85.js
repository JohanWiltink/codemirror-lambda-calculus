import{createApp as w}from"https://unpkg.com/petite-vue@0.4.1?module";import*as z from"https://unpkg.com/@codewars/lambda-calculus";const I=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function f(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(t){if(t.ep)return;t.ep=!0;const r=f(t);fetch(t.href,r)}};I();const U=function(i){i.defineMode("lambdacalc",function(c,f){const u="variable-2",t="text",r="bracket",d="keyword",b=d,g="text",y="text",E="def",x="atom",A="number",L="text",v="error",C="variable-3",p="error",a=/[a-zA-Z][a-zA-Z0-9_\-']*/,k=/=/,M=/\(|\)/,O=/[a-zA-Z_][a-zA-Z0-9_\-']*|\./,N=/\d+/;function h(e,n){return D(e,n)||(n.debug?null:s(e,n))}function D(e,n){const o=(e.match(a)||[])[0];if(n.f=S,!o||!(/[=\s]/.test(e.peek())||e.eol()))return null;const l=[];return n.defined.includes(o)&&l.push(C),n.defined.push(o),l.push(u),l.join(" ")}function S(e,n){return e.match(k)?(n.f=s,t):null}function s(e,n){return T(e,n)||_(e,n)||B(e,n)||F(e)}function T(e,n){const o=e.eat(M);return o?o=="("&&e.peek()==")"?(e.next(),L):(o=="("?(n.depth.push(e.column()+e.indentation()),n.bound.push([])):(n.depth.pop(),n.bound.pop()),n.f=s,r):null}function _(e,n){return e.eat("\\")?(n.f=P,d):null}function B(e,n){const o=(e.match(a)||[])[0];return o?n.bound.some(l=>l.includes(o))?y:n.defined.includes(o)?g:n.debug?v:"text":null}function F(e,n){return(e.match(N)||[])[0]&&(/\s|\)/.test(e.peek())||e.eol())?A:null}function P(e,n){const o=(e.match(O)||[])[0];return o?o==="."?(n.f=s,b):o[0]==="_"?x:(n.bound[n.bound.length-1].push(o),E):null}function R(e,n){return e.match(/[^\s]*/),p}return{startState:function(){return{f:h,depth:[],defined:[],bound:[[]],debug:!1}},copyState:function(e){return{f:e.f,depth:[...e.depth],defined:[...e.defined],bound:e.bound.map(n=>[...n]),debug:e.debug}},token:function(e,n){if(e.eat(/\t/))return p;if(/[ \n]/.test(e.peek())){e.eatWhile(/[ \n]/);return}return e.peek()==="#"?(e.match(/^#debug/)&&(n.debug=!n.debug),e.skipToEnd(),"comment"):(e.sol()&&n.depth.length===0&&(n.bound=[[]],n.f=h),n.f(e,n)||R(e))},indent:function(e,n){return console.log(e.depth),e.depth.length?e.depth[e.depth.length-1]+2:0},lineComment:"#"}}),i.defineMIME("text/x-lambdacalc","lambdacalc")};U(CodeMirror);const m=CodeMirror.fromTextArea(document.getElementById("code"),{mode:"lambdacalc",lineNumbers:!0,matchBrackets:!0,theme:"codewars",specialChars:/\\/,specialCharPlaceholder:()=>{const i=document.createElement("span");return i.setAttribute("cm-text","\\"),i.innerHTML="\u03BB",i}});m.setSize(500,400);const Z=i=>i.replace(/\\/g,"\u03BB");w({purity:"Let",purityOptions:["Let","LetRec","PureLC"],verbosity:"Calm",verbosityOptions:["Calm","Concise","Loquacious","Verbose"],numEncoding:"Church",numEncodingOptions:["None","Church","Scott","BinaryScott"],evaluation:"not false",result:"",error:"",evaluate(){this.result="",this.error="";const i=m.getValue(),c=this.evaluation,f=z.compileWith({purity:this.purity,verbosity:this.verbosity,numEncoding:this.numEncoding});try{const{result:u}=f(`${i}

result = ${c}`);this.result=Z(u.term+"")}catch(u){this.error=u.message||u.name}}}).mount();
