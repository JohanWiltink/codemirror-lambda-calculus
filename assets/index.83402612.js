import{createApp as R}from"https://unpkg.com/petite-vue@0.4.1?module";import*as w from"https://unpkg.com/@codewars/lambda-calculus";const z=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function d(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=d(t);fetch(t.href,r)}};z();const I=function(i){i.defineMode("lambdacalc",function(u,d){const c="variable-2",t="text",r="bracket",l="keyword",h=l,b="variable",g="text",y="def",E="atom",A="number",v="text",L="error",x="variable-3",C="error",f=/[a-zA-Z][a-zA-Z0-9_\-']*/,k=/=/,M=/\(|\)/,N=/[a-zA-Z_][a-zA-Z0-9_\-']*|\./,O=/\d+/;function a(e,n){const o=(e.match(f)||[])[0];if(n.f=S,!o||!(/[=\s]/.test(e.peek())||e.eol()))return null;const s=[];return n.defined.includes(o)&&s.push(x),n.defined.push(o),s.push(c),s.join(" ")}function S(e,n){return e.match(k)?(n.f=p,t):null}function p(e,n){return _(e,n)||D(e,n)||T(e,n)||B(e)}function _(e,n){const o=e.eat(M);return o?o=="("&&e.peek()==")"?(e.next(),v):(o=="("?(n.depth.push(e.column()+e.indentation()),n.bound.push([])):(n.depth.pop(),n.bound.pop()),r):null}function D(e,n){return e.eat("\\")?(n.f=F,l):null}function T(e,n){const o=(e.match(f)||[])[0];return o?n.bound.some(s=>s.includes(o))?g:n.defined.includes(o)?b:L:null}function B(e,n){return(e.match(O)||[])[0]&&(/\s|\)/.test(e.peek())||e.eol())?A:null}function F(e,n){const o=(e.match(N)||[])[0];return o?o==="."?(n.f=p,h):o[0]==="_"?E:(n.bound[n.bound.length-1].push(o),y):null}function P(e,n){return e.match(/[^\s]*/),C}return{startState:function(){return{f:a,depth:[],defined:[],bound:[[]]}},copyState:function(e){return{f:e.f,depth:[...e.depth],defined:[...e.defined],bound:e.bound.map(n=>[...n])}},token:function(e,n){if(/\s/.test(e.peek())){e.eatSpace();return}return e.peek()==="#"?(e.skipToEnd(),"comment"):(e.sol()&&n.depth.length===0&&(n.bound=[[]],n.f=a),n.f(e,n)||P(e))},indent:function(e,n){return console.log(e.depth),e.depth.length?e.depth[e.depth.length-1]+2:0},lineComment:"#"}}),i.defineMIME("text/x-lambdacalc","lambdacalc")};I(CodeMirror);const m=CodeMirror.fromTextArea(document.getElementById("code"),{mode:"lambdacalc",lineNumbers:!0,matchBrackets:!0,theme:"codewars",specialChars:/\\/,specialCharPlaceholder:()=>{const i=document.createElement("span");return i.setAttribute("cm-text","\\"),i.innerHTML="\u03BB",i}});m.setSize(500,400);const U=i=>i.replace(/\\/g,"\u03BB");R({purity:"Let",purityOptions:["Let","LetRec","PureLC"],verbosity:"Calm",verbosityOptions:["Calm","Concise","Loquacious","Verbose"],numEncoding:"Church",numEncodingOptions:["None","Church","Scott","BinaryScott"],evaluation:"not false",result:"",error:"",evaluate(){this.result="",this.error="";const i=m.getValue(),u=this.evaluation,d=w.compileWith({purity:this.purity,verbosity:this.verbosity,numEncoding:this.numEncoding});try{const{result:c}=d(`${i}

result = ${u}`);this.result=U(c.term+"")}catch(c){this.error=c.message||c.name}}}).mount();
